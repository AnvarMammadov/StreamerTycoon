<Application x:Class="StreamerTycoon.App"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:vm="clr-namespace:StreamerTycoon.ViewModels"
             xmlns:views="clr-namespace:StreamerTycoon.Views"
             xmlns:util="clr-namespace:StreamerTycoon.Utilities"
             StartupUri="MainWindow.xaml">
    <Application.Resources>
        <ResourceDictionary>

            <Color x:Key="Color_WindowBg">#1E1E24</Color>
            <Color x:Key="Color_Accent">#007ACC</Color>

            <SolidColorBrush x:Key="Brush_WindowBg" Color="{StaticResource Color_WindowBg}"/>
            <SolidColorBrush x:Key="Brush_Border" Color="#333333"/>

            <SolidColorBrush x:Key="ScrollBar_Track" Color="#202124"/>
            <SolidColorBrush x:Key="ScrollBar_Thumb" Color="#5F6368"/>
            <SolidColorBrush x:Key="ScrollBar_ThumbHover" Color="#80868B"/>
            <Style TargetType="{x:Type ScrollBar}">
                <Setter Property="Stylus.IsFlicksEnabled" Value="false"/>
                <Setter Property="Foreground" Value="{StaticResource ScrollBar_Thumb}"/>
                <Setter Property="Background" Value="{StaticResource ScrollBar_Track}"/>
                <Setter Property="Width" Value="10"/>
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="{x:Type ScrollBar}">
                            <Grid x:Name="GridRoot" Width="10" Background="{TemplateBinding Background}">
                                <Grid.RowDefinitions>
                                    <RowDefinition MaxHeight="18"/>
                                    <RowDefinition Height="0.00001*"/>
                                    <RowDefinition MaxHeight="18"/>
                                </Grid.RowDefinitions>

                                <Track x:Name="PART_Track" Grid.RowSpan="3" IsDirectionReversed="true" Focusable="false">
                                    <Track.Thumb>
                                        <Thumb x:Name="Thumb" Background="{TemplateBinding Foreground}" 
                                               Style="{DynamicResource ScrollThumbStyle}"/>
                                    </Track.Thumb>
                                    <Track.IncreaseRepeatButton>
                                        <RepeatButton x:Name="PageUp" Command="ScrollBar.PageDownCommand" Opacity="0" Focusable="false"/>
                                    </Track.IncreaseRepeatButton>
                                    <Track.DecreaseRepeatButton>
                                        <RepeatButton x:Name="PageDown" Command="ScrollBar.PageUpCommand" Opacity="0" Focusable="false"/>
                                    </Track.DecreaseRepeatButton>
                                </Track>
                            </Grid>

                            <ControlTemplate.Triggers>
                                <Trigger Property="Orientation" Value="Horizontal">
                                    <Setter TargetName="GridRoot" Property="Width" Value="Auto"/>
                                    <Setter TargetName="GridRoot" Property="Height" Value="10"/>
                                    <Setter TargetName="Thumb" Property="Tag" Value="Horizontal"/>
                                    <Setter TargetName="PageDown" Property="Command" Value="ScrollBar.PageLeftCommand"/>
                                    <Setter TargetName="PageUp" Property="Command" Value="ScrollBar.PageRightCommand"/>
                                </Trigger>
                            </ControlTemplate.Triggers>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style>

            <Style x:Key="ScrollThumbStyle" TargetType="{x:Type Thumb}">
                <Setter Property="SnapsToDevicePixels" Value="True"/>
                <Setter Property="OverridesDefaultStyle" Value="true"/>
                <Setter Property="IsTabStop" Value="false"/>
                <Setter Property="Focusable" Value="false"/>
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="{x:Type Thumb}">
                            <Border x:Name="Border" CornerRadius="4" Background="{TemplateBinding Background}" 
                                    BorderBrush="Transparent" BorderThickness="1" Margin="1"/>
                            <ControlTemplate.Triggers>
                                <Trigger Property="IsMouseOver" Value="True">
                                    <Setter TargetName="Border" Property="Background" Value="{StaticResource ScrollBar_ThumbHover}"/>
                                </Trigger>
                                <Trigger Property="IsDragging" Value="True">
                                    <Setter TargetName="Border" Property="Background" Value="#A8C7FA"/>
                                </Trigger>
                            </ControlTemplate.Triggers>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style>

            <DropShadowEffect x:Key="NeonGlow" Color="#00A8FF" BlurRadius="12" ShadowDepth="0" Opacity="0.3"/>

            <VisualBrush x:Key="GeometricBackground" TileMode="Tile" Viewport="0,0,400,400" ViewportUnits="Absolute">
                <VisualBrush.Visual>
                    <Grid Width="400" Height="400" Background="#0A0A0A">
                        <Path Data="M0,0 L400,400" Stroke="#151515" StrokeThickness="2"/>
                        <Path Data="M400,0 L0,400" Stroke="#151515" StrokeThickness="2"/>
                        <Rectangle Width="200" Height="200" Stroke="#151515" StrokeThickness="2"/>
                        <Ellipse Width="300" Height="300" Stroke="#111" StrokeThickness="1"/>
                    </Grid>
                </VisualBrush.Visual>
            </VisualBrush>

            <Geometry x:Key="Icon_Start">M3,3H21V21H3V3M5,5V19H19V5H5M11,11H13V13H11V11Z</Geometry>
            <Geometry x:Key="Icon_Close">M13.46,12L19,17.54V19H17.54L12,13.46L6.46,19H5V17.54L10.54,12L5,6.46V5H6.46L12,10.54L17.54,5H19V6.46L13.46,12Z</Geometry>
            <Geometry x:Key="Icon_Min">M19,13H5V11H19V13Z</Geometry>
            <Geometry x:Key="Icon_MyPC">M4,2H20A2,2 0 0,1 22,4V20A2,2 0 0,1 20,22H4A2,2 0 0,1 2,20V4A2,2 0 0,1 4,2M6,4V6H18V4H6M6,8V16H18V8H6M6,18V20H18V18H6Z</Geometry>
            <Geometry x:Key="Icon_Trash">M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z</Geometry>
            <Geometry x:Key="Icon_Web">M16.36,14C16.44,13.34 16.5,12.68 16.5,12C16.5,11.32 16.44,10.66 16.36,10H19.74C19.9,10.64 20,11.31 20,12C20,12.69 19.9,13.36 19.74,14M14.59,19.56C15.19,18.45 15.65,17.25 15.97,16H18.92C17.96,17.65 16.43,18.9 14.59,19.56M14.34,14H9.66C9.56,13.34 9.5,12.68 9.5,12C9.5,11.32 9.56,10.66 9.66,10H14.34C14.43,10.66 14.5,11.32 14.5,12C14.5,12.68 14.43,13.34 14.34,14M12,19.96C11.17,18.76 10.5,17.43 10.09,16H13.91C13.5,17.43 12.83,18.76 12,19.96M8,12C8,12.68 8.06,13.34 8.16,14H3.5C3.31,13.36 3.22,12.69 3.22,12C3.22,11.31 3.31,10.64 3.5,10H8.16C8.06,10.66 8,11.32 8,12M5.41,16.95C6.24,17.55 7.17,18 8.16,18.29C8.42,17.63 8.65,16.91 8.84,16.15H4.26C4.55,16.45 4.96,16.73 5.41,16.95M4.26,7.85H8.84C8.65,7.09 8.42,6.37 8.16,5.71C7.17,6 6.24,6.45 5.41,7.05C4.96,7.27 4.55,7.55 4.26,7.85M12,4.03C12.83,5.23 13.5,6.57 13.91,8H10.09C10.5,6.57 11.17,5.23 12,4.03M18.92,8H15.97C15.65,6.75 15.19,5.55 14.59,4.44C16.43,5.1 17.96,6.35 18.92,8M12,2C6.47,2 2,6.5 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z</Geometry>
            <Geometry x:Key="Icon_Folder">M10,4H4C2.89,4 2,4.89 2,6V18A2,2 0 0,0 4,20H20A2,2 0 0,0 22,18V8C22,6.89 21.1,6 20,6H12L10,4Z</Geometry>
            <Geometry x:Key="Icon_User">M12,4A4,4 0 0,1 16,8A4,4 0 0,1 12,12A4,4 0 0,1 8,8A4,4 0 0,1 12,4M12,14C16.42,14 20,15.79 20,18V20H4V18C4,15.79 7.58,14 12,14Z</Geometry>
            <Geometry x:Key="Icon_Discord">M4,6V18H20V6H4M20,4A2,2 0 0,1 22,6V18A2,2 0 0,1 20,20H4A2,2 0 0,1 2,18V6A2,2 0 0,1 4,4H20M7.5,15A1.5,1.5 0 1,1 9,13.5A1.5,1.5 0 0,1 7.5,15M16.5,15A1.5,1.5 0 1,1 18,13.5A1.5,1.5 0 0,1 16.5,15M12,10L10,8H14L12,10Z</Geometry>
            <Geometry x:Key="Icon_Kick">M2,2H22V22H2V2M8,6V18H11V14L15,18H19L14,13L19,8H15L11,12V6H8Z</Geometry>
            <Geometry x:Key="Icon_Thor">M12,2C6.48,2 2,6.48 2,12C2,17.52 6.48,22 12,22C17.52,22 22,17.52 22,12C22,6.48 17.52,2 12,2M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20M12,6C8.69,6 6,8.69 6,12C6,15.31 8.69,18 12,18C15.31,18 18,15.31 18,12C18,8.69 15.31,6 12,6M12,16C9.79,16 8,14.21 8,12C8,9.79 9.79,8 12,8C14.21,8 16,9.79 16,12C16,14.21 14.21,16 12,16Z</Geometry>

            <Style x:Key="DesktopIconBtn" TargetType="Button">
                <Setter Property="Background" Value="Transparent"/>
                <Setter Property="BorderThickness" Value="0"/>
                <Setter Property="Width" Value="80"/>
                <Setter Property="Height" Value="90"/>
                <Setter Property="Margin" Value="5"/>
                <Setter Property="Cursor" Value="Hand"/>
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="Button">
                            <Border Background="{TemplateBinding Background}" CornerRadius="4" BorderBrush="#20FFFFFF" BorderThickness="0">
                                <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                            </Border>
                            <ControlTemplate.Triggers>
                                <Trigger Property="IsMouseOver" Value="True">
                                    <Setter Property="Background" Value="#15FFFFFF"/>
                                    <Setter Property="BorderThickness" Value="1"/>
                                </Trigger>
                            </ControlTemplate.Triggers>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style>

            <DataTemplate x:Key="WindowFrameTemplate">
                <Border Background="{StaticResource Brush_WindowBg}" 
                        BorderBrush="#444" BorderThickness="1" CornerRadius="6" 
                        Width="{Binding Width}" Height="{Binding Height}" Effect="{StaticResource NeonGlow}">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="32"/>
                            <RowDefinition Height="*"/>
                        </Grid.RowDefinitions>

                        <Border Background="#252525" CornerRadius="6,6,0,0" BorderBrush="#333" BorderThickness="0,0,0,1" util:WindowDragHelper.EnableDrag="True">
                            <Grid>
                                <StackPanel Orientation="Horizontal" VerticalAlignment="Center" Margin="10,0">
                                    <Path Data="{StaticResource Icon_MyPC}" Fill="#888" Width="14" Height="14" Stretch="Uniform" Margin="0,0,8,0"/>
                                    <TextBlock Text="{Binding Title}" Foreground="#CCC" FontSize="12" FontFamily="Segoe UI" FontWeight="SemiBold"/>
                                </StackPanel>

                                <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,0,5,0">
                                    <Button Command="{Binding MinimizeCommand}" Width="35" Height="30" Background="Transparent" BorderThickness="0" Cursor="Hand">
                                        <Path Data="{StaticResource Icon_Min}" Fill="#888" Width="10" Height="10" Stretch="Uniform"/>
                                        <Button.Style>
                                            <Style TargetType="Button">
                                                <Setter Property="Template">
                                                    <Setter.Value>
                                                        <ControlTemplate TargetType="Button">
                                                            <Border Background="{TemplateBinding Background}">
                                                                <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                                            </Border>
                                                            <ControlTemplate.Triggers>
                                                                <Trigger Property="IsMouseOver" Value="True">
                                                                    <Setter Property="Background" Value="#333"/>
                                                                </Trigger>
                                                            </ControlTemplate.Triggers>
                                                        </ControlTemplate>
                                                    </Setter.Value>
                                                </Setter>
                                            </Style>
                                        </Button.Style>
                                    </Button>

                                    <Button Command="{Binding MaximizeCommand}" Width="35" Height="30" Background="Transparent" BorderThickness="0" Cursor="Hand">
                                        <Path Data="M4,4H16V16H4V4M6,6V14H14V6H6Z" Fill="#888" Width="10" Height="10" Stretch="Uniform"/>
                                        <Button.Style>
                                            <Style TargetType="Button">
                                                <Setter Property="Template">
                                                    <Setter.Value>
                                                        <ControlTemplate TargetType="Button">
                                                            <Border Background="{TemplateBinding Background}">
                                                                <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                                            </Border>
                                                            <ControlTemplate.Triggers>
                                                                <Trigger Property="IsMouseOver" Value="True">
                                                                    <Setter Property="Background" Value="#333"/>
                                                                </Trigger>
                                                            </ControlTemplate.Triggers>
                                                        </ControlTemplate>
                                                    </Setter.Value>
                                                </Setter>
                                            </Style>
                                        </Button.Style>
                                    </Button>

                                    <Button Command="{Binding CloseCommand}" Width="35" Height="30" Background="Transparent" BorderThickness="0" Cursor="Hand">
                                        <Button.Style>
                                            <Style TargetType="Button">
                                                <Setter Property="Template">
                                                    <Setter.Value>
                                                        <ControlTemplate TargetType="Button">
                                                            <Border Background="{TemplateBinding Background}" CornerRadius="0,6,0,0">
                                                                <Path Data="{StaticResource Icon_Close}" Fill="{TemplateBinding Foreground}" Width="10" Height="10" Stretch="Uniform" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                                            </Border>
                                                            <ControlTemplate.Triggers>
                                                                <Trigger Property="IsMouseOver" Value="True">
                                                                    <Setter Property="Background" Value="#C42B1C"/>
                                                                    <Setter Property="Foreground" Value="White"/>
                                                                </Trigger>
                                                                <Trigger Property="IsMouseOver" Value="False">
                                                                    <Setter Property="Foreground" Value="#AAA"/>
                                                                </Trigger>
                                                            </ControlTemplate.Triggers>
                                                        </ControlTemplate>
                                                    </Setter.Value>
                                                </Setter>
                                            </Style>
                                        </Button.Style>
                                    </Button>
                                </StackPanel>
                            </Grid>
                        </Border>

                        <ContentControl Grid.Row="1" Content="{Binding}"/>
                    </Grid>
                </Border>
            </DataTemplate>

            <DataTemplate DataType="{x:Type vm:BrowserViewModel}">
                <views:BrowserView/>
            </DataTemplate>
            <DataTemplate DataType="{x:Type vm:ChatViewModel}">
                <views:ChatView/>
            </DataTemplate>
            <DataTemplate DataType="{x:Type vm:OnionViewModel}">
                <views:OnionView/>
            </DataTemplate>
            <DataTemplate DataType="{x:Type vm:StreamAppViewModel}">
                <views:StreamView/>
            </DataTemplate>
            <DataTemplate x:Key="BedroomTemplate">
                <views:BedroomView/>
            </DataTemplate>
            <DataTemplate x:Key="LoginTemplate">
                <views:LoginView/>
            </DataTemplate>
            <DataTemplate x:Key="DesktopTemplate">
                <views:DesktopView/>
            </DataTemplate>
            <DataTemplate DataType="{x:Type vm:FileExplorerViewModel}">
                <views:FileExplorerView/>
            </DataTemplate>

            <Style x:Key="MainViewSwitcherStyle" TargetType="ContentControl">
                <Style.Triggers>
                    <DataTrigger Binding="{Binding CurrentState}" Value="Bedroom">
                        <Setter Property="ContentTemplate" Value="{StaticResource BedroomTemplate}"/>
                    </DataTrigger>
                    <DataTrigger Binding="{Binding CurrentState}" Value="LoginScreen">
                        <Setter Property="ContentTemplate" Value="{StaticResource LoginTemplate}"/>
                    </DataTrigger>
                    <DataTrigger Binding="{Binding CurrentState}" Value="Desktop">
                        <Setter Property="ContentTemplate" Value="{StaticResource DesktopTemplate}"/>
                    </DataTrigger>
                </Style.Triggers>
            </Style>

        </ResourceDictionary>
    </Application.Resources>
</Application>