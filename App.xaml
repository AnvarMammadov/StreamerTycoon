<Application x:Class="StreamerTycoon.App"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:vm="clr-namespace:StreamerTycoon.ViewModels"
             xmlns:views="clr-namespace:StreamerTycoon.Views"
             StartupUri="MainWindow.xaml">
    <Application.Resources>
        <ResourceDictionary>

            <Color x:Key="Color_DarkBase">#101520</Color>
            <Color x:Key="Color_Taskbar">#E60F1218</Color>
            <Color x:Key="Color_NeonBlue">#00F0FF</Color>
            <SolidColorBrush x:Key="Brush_Taskbar" Color="{StaticResource Color_Taskbar}"/>

            <DropShadowEffect x:Key="NeonGlowBlue" Color="{StaticResource Color_NeonBlue}" BlurRadius="15" ShadowDepth="0" Opacity="0.4"/>

            <VisualBrush x:Key="GeometricBackground" TileMode="Tile" Viewport="0,0,300,300" ViewportUnits="Absolute">
                <VisualBrush.Visual>
                    <Grid Width="300" Height="300" Background="#101520">
                        <Path Data="M0,0 L150,0 L0,150 Z" Fill="#151C2B"/>
                        <Path Data="M300,0 L300,150 L150,0 Z" Fill="#121825"/>
                        <Path Data="M0,300 L150,300 L0,150 Z" Fill="#121825"/>
                        <Path Data="M300,300 L150,300 L300,150 Z" Fill="#151C2B"/>
                        <Path Data="M150,0 L300,150 L150,300 L0,150 Z" Fill="#182030"/>
                        <Ellipse Width="100" Height="100" Fill="#05FFFFFF" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                    </Grid>
                </VisualBrush.Visual>
            </VisualBrush>

            <Geometry x:Key="Icon_Start">M3,3H21V21H3V3M5,5V19H19V5H5M11,11H13V13H11V11Z</Geometry>
            <Geometry x:Key="Icon_MyPC">M4,2H20A2,2 0 0,1 22,4V20A2,2 0 0,1 20,22H4A2,2 0 0,1 2,20V4A2,2 0 0,1 4,2M6,4V6H18V4H6M6,8V16H18V8H6M6,18V20H18V18H6Z</Geometry>
            <Geometry x:Key="Icon_Trash">M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z</Geometry>
            <Geometry x:Key="Icon_Web">M12,2A10,10 0 0,1 22,12A10,10 0 0,1 12,22A10,10 0 0,1 2,12A10,10 0 0,1 12,2M12,4A8,8 0 0,0 4,12C4,13.85 4.63,15.55 5.68,16.91L9.38,10.5C9.07,9.85 8.94,9.1 9.12,8.38C9.5,6.8 11.2,5.91 12.6,6.33L12,4M12,18A6,6 0 0,1 6,12C6,11.3 6.12,10.63 6.33,10L10,16.33C10.6,17.38 11.7,18 12.8,18H12M15.5,16.5L13.5,13H17.8C17.65,14.3 17,15.5 16,16.4L15.5,16.5M16.5,8H11.5L12.5,6.3C14.75,6.3 16.5,8.1 16.5,10.3C16.5,10.8 16.4,11.3 16.2,11.7L18.4,15.5C19.4,14.5 20,13.3 20,12A8,8 0 0,0 12,4V4.5L16.5,8Z</Geometry>
            <Geometry x:Key="Icon_Folder">M10,4H4C2.89,4 2,4.89 2,6V18A2,2 0 0,0 4,20H20A2,2 0 0,0 22,18V8C22,6.89 21.1,6 20,6H12L10,4Z</Geometry>
            <Geometry x:Key="Icon_User">M12,4A4,4 0 0,1 16,8A4,4 0 0,1 12,12A4,4 0 0,1 8,8A4,4 0 0,1 12,4M12,14C16.42,14 20,15.79 20,18V20H4V18C4,15.79 7.58,14 12,14Z</Geometry>
            <Geometry x:Key="Icon_Discord">M4,6V18H20V6H4M20,4A2,2 0 0,1 22,6V18A2,2 0 0,1 20,20H4A2,2 0 0,1 2,18V6A2,2 0 0,1 4,4H20M7.5,15A1.5,1.5 0 1,1 9,13.5A1.5,1.5 0 0,1 7.5,15M16.5,15A1.5,1.5 0 1,1 18,13.5A1.5,1.5 0 0,1 16.5,15M12,10L10,8H14L12,10Z</Geometry>
            <Geometry x:Key="Icon_Kick">M2,2H22V22H2V2M8,6V18H11V14L15,18H19L14,13L19,8H15L11,12V6H8Z</Geometry>
            <Geometry x:Key="Icon_Thor">M12,2C6.48,2 2,6.48 2,12C2,17.52 6.48,22 12,22C17.52,22 22,17.52 22,12C22,6.48 17.52,2 12,2M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20M12,6C8.69,6 6,8.69 6,12C6,15.31 8.69,18 12,18C15.31,18 18,15.31 18,12C18,8.69 15.31,6 12,6M12,16C9.79,16 8,14.21 8,12C8,9.79 9.79,8 12,8C14.21,8 16,9.79 16,12C16,14.21 14.21,16 12,16Z</Geometry>

            <Style x:Key="DesktopIconBtn" TargetType="Button">
                <Setter Property="Background" Value="Transparent"/>
                <Setter Property="BorderThickness" Value="0"/>
                <Setter Property="Width" Value="80"/>
                <Setter Property="Height" Value="90"/>
                <Setter Property="Margin" Value="5"/>
                <Setter Property="Cursor" Value="Hand"/>
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="Button">
                            <Border Background="{TemplateBinding Background}" CornerRadius="2" BorderBrush="#30FFFFFF" BorderThickness="0">
                                <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                            </Border>
                            <ControlTemplate.Triggers>
                                <Trigger Property="IsMouseOver" Value="True">
                                    <Setter Property="Background" Value="#20FFFFFF"/>
                                    <Setter Property="BorderThickness" Value="1"/>
                                </Trigger>
                            </ControlTemplate.Triggers>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style>

            <DataTemplate x:Key="WindowFrameTemplate">
                <Border Background="#1E1E1E" BorderBrush="#333" BorderThickness="1" CornerRadius="5" 
                        Width="600" Height="400" Effect="{StaticResource NeonGlowBlue}">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="30"/>
                            <RowDefinition Height="*"/>
                        </Grid.RowDefinitions>
                        <Border Background="#252525" CornerRadius="5,5,0,0">
                            <Grid>
                                <TextBlock Text="{Binding Title}" Foreground="#AAA" VerticalAlignment="Center" Margin="10,0" FontSize="12"/>
                                <Button Command="{Binding CloseCommand}" Content="✕" HorizontalAlignment="Right" Width="30" 
                                        Background="Transparent" BorderThickness="0" Foreground="#FF5555" Cursor="Hand"/>
                            </Grid>
                        </Border>
                        <ContentControl Grid.Row="1" Content="{Binding}"/>
                    </Grid>
                </Border>
            </DataTemplate>

            <DataTemplate DataType="{x:Type vm:BrowserViewModel}">
                <Grid Background="#EFEFEF">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="40"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>
                    <Border Background="White" Margin="5" CornerRadius="5" BorderBrush="#DDD" BorderThickness="1">
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="🔒 https://g2g-market.com" VerticalAlignment="Center" Margin="10,0" Foreground="Green"/>
                        </StackPanel>
                    </Border>
                    <ScrollViewer Grid.Row="1">
                        <ItemsControl ItemsSource="{Binding MarketItems}">
                            <ItemsControl.ItemTemplate>
                                <DataTemplate>
                                    <Border Background="White" Margin="10,5" Padding="10" CornerRadius="5" BorderBrush="#DDD" BorderThickness="1">
                                        <Grid>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="*"/>
                                                <ColumnDefinition Width="Auto"/>
                                            </Grid.ColumnDefinitions>
                                            <StackPanel>
                                                <TextBlock Text="{Binding Title}" FontWeight="Bold" Foreground="#333"/>
                                                <TextBlock Text="{Binding SellerName}" Foreground="Orange" FontSize="10"/>
                                            </StackPanel>
                                            <Button Grid.Column="1" Content="{Binding Price, StringFormat='${0}'}" 
                                                    Background="#4FC3F7" Foreground="White" Padding="10,5" BorderThickness="0" Cursor="Hand"/>
                                        </Grid>
                                    </Border>
                                </DataTemplate>
                            </ItemsControl.ItemTemplate>
                        </ItemsControl>
                    </ScrollViewer>
                </Grid>
            </DataTemplate>

            <DataTemplate DataType="{x:Type vm:ChatViewModel}">
                <Grid Background="#36393F">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="150"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>
                    <Border Background="#2F3136">
                        <StackPanel Margin="10">
                            <TextBlock Text="DIRECT MESSAGES" Foreground="#8E9297" FontSize="10" FontWeight="Bold" Margin="0,0,0,10"/>
                            <Border Background="#40444B" Padding="5" CornerRadius="3">
                                <TextBlock Text="Scammer1337" Foreground="White"/>
                            </Border>
                        </StackPanel>
                    </Border>
                    <Grid Grid.Column="1">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="*"/>
                            <RowDefinition Height="50"/>
                        </Grid.RowDefinitions>
                        <ScrollViewer>
                            <ItemsControl ItemsSource="{Binding Messages}">
                                <ItemsControl.ItemTemplate>
                                    <DataTemplate>
                                        <StackPanel Margin="10,5">
                                            <TextBlock Text="{Binding Username}" Foreground="{Binding ColorHex}" FontWeight="Bold" FontSize="11"/>
                                            <TextBlock Text="{Binding Message}" Foreground="#DCDDDE" TextWrapping="Wrap"/>
                                        </StackPanel>
                                    </DataTemplate>
                                </ItemsControl.ItemTemplate>
                            </ItemsControl>
                        </ScrollViewer>
                        <TextBox Grid.Row="1" Background="#40444B" Foreground="White" BorderThickness="0" VerticalContentAlignment="Center" Margin="10" Padding="10,0" Text="Message..."/>
                    </Grid>
                </Grid>
            </DataTemplate>

            <DataTemplate DataType="{x:Type vm:OnionViewModel}">
                <Grid Background="#0F0F0F">
                    <TextBlock Text="TOR CONNECTION ESTABLISHED..." Foreground="#00FF00" FontFamily="Consolas" Margin="10,5"/>
                    <ScrollViewer Margin="0,30,0,0">
                        <ItemsControl ItemsSource="{Binding HackingTools}">
                            <ItemsControl.ItemTemplate>
                                <DataTemplate>
                                    <Border BorderBrush="#333" BorderThickness="0,0,0,1" Padding="10">
                                        <TextBlock Text="{Binding}" Foreground="#AB47BC" FontFamily="Consolas"/>
                                    </Border>
                                </DataTemplate>
                            </ItemsControl.ItemTemplate>
                        </ItemsControl>
                    </ScrollViewer>
                </Grid>
            </DataTemplate>

            <DataTemplate x:Key="BedroomTemplate">
                <views:BedroomView/>
            </DataTemplate>
            <DataTemplate x:Key="LoginTemplate">
                <views:LoginView/>
            </DataTemplate>
            <DataTemplate x:Key="DesktopTemplate">
                <views:DesktopView/>
            </DataTemplate>

            <Style x:Key="MainViewSwitcherStyle" TargetType="ContentControl">
                <Style.Triggers>
                    <DataTrigger Binding="{Binding CurrentState}" Value="Bedroom">
                        <Setter Property="ContentTemplate" Value="{StaticResource BedroomTemplate}"/>
                    </DataTrigger>
                    <DataTrigger Binding="{Binding CurrentState}" Value="LoginScreen">
                        <Setter Property="ContentTemplate" Value="{StaticResource LoginTemplate}"/>
                    </DataTrigger>
                    <DataTrigger Binding="{Binding CurrentState}" Value="Desktop">
                        <Setter Property="ContentTemplate" Value="{StaticResource DesktopTemplate}"/>
                    </DataTrigger>
                </Style.Triggers>
            </Style>

        </ResourceDictionary>
    </Application.Resources>
</Application>